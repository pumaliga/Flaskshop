{% extends 'base.html' %}


{% block content %}
    <script type="module" src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/adding.js') }}"></script>


    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul class=flashes>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <div class="add-wrapper">


        <form method="POST" id="myForm" enctype="multipart/form-data" >
            <p class="title">
                Добавить новую модель
            </p>
            <div class="wrap-add">
                <div class="img">
                    <input type="file" id="file" name="files">
                </div>
                <div class="select-choice">
                    <select name="select-category" class="select" required>
                        <option disabled selected value="">Тип обуви</option>
                        {% for i in categories %}
                            <option value="{{ i.id }}">{{ i.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                 <div class="div-mod">
                     <input name="name" class="input-model" placeholder="Название" required>
                 </div>
                <div class="div-mod">
                    <textarea name="description" class="desc" placeholder="Описание модели" required></textarea>
                </div>
                <div class="select-choice">
                    <select name="select-season" class="select" required>
                        <option disabled selected value="">Сезон</option>
                        <option value="Зима">Зима</option>
                        <option value="Лето">Лето</option>
                        <option value="Весна/Осень">Весна/Осень</option>
                    </select>
                </div>
                <div class="select-choice">
                    <select name="available" class="select" required>
                        <option value="False" selected>Нет в наличии</option>
                        <option value="True">В наличии</option>
                    </select>
                </div>
                <div class="div-mod">
                    <input name="price" class="input-model" placeholder="Цена" required>
                </div>
                <div class="div-create">
                    <input type="submit" class="btn-model" value="Создать">
                </div>
{#                <button class="btn-model" id="exam" type="submit">Создать</button>#}
                <button class="btn-home" type="submit">
                    <a class="link" href="{{ url_for('main.index') }}">Назад</a>
                </button>
            </div>
        </form>
    </div>
{#    <script>#}
{#        const myForm = document.getElementById('myForm')#}
{#        const inpFiles = document.getElementById('file')#}
{##}
{#        myForm.addEventListener("submit", e => {#}
{#            e.preventDefault()#}
{##}
{#            const endpoint = '/main/create/model'#}
{#            const formData = new FormData()#}
{##}
{#            formData.append('file', file.files)#}
{##}
{#            fetch(endpoint, {#}
{#                method: 'post',#}
{#                body: formData#}
{#            }).catch(console.error)#}
{#        })#}
{##}
{#    </script>#}
{% endblock %}